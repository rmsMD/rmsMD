<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Further details modelsummary_rms • rmsMD</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Further details modelsummary_rms">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rmsMD</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Standard_workflow_with_restricted_cubic_splines.html">Standard workflow with restricted cubic splines</a></li>
    <li><a class="dropdown-item" href="../articles/Further_details_modelsummary_rms.html">Further details: modelsummary_rms</a></li>
    <li><a class="dropdown-item" href="../articles/Further_details_ggrmsMD.html">Further details: ggrmsMD</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sjtingle/rmsMD/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Further details modelsummary_rms</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sjtingle/rmsMD/blob/master/vignettes/Further_details_modelsummary_rms.Rmd" class="external-link"><code>vignettes/Further_details_modelsummary_rms.Rmd</code></a></small>
      <div class="d-none name"><code>Further_details_modelsummary_rms.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hbiostat.org/R/rms/" class="external-link">rms</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rmsMD/rmsMD" class="external-link">rmsMD</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>modelsummary_rms</code> function is designed to process
output from models fitted using the <strong>rms</strong> package and
generate a summarised dataframe of the results. The goal is to produce
publication-ready summaries of the models.</p>
<p>For standard use with <code>rms</code> models that use restricted
cubic splines, please refer to the vignette
<strong>Standard_workflow_with_restricted_cubic_splines</strong>.</p>
<p>For these vignettes we will use a simulated dataset to predict the
impact of age, BMI, Sex and Smoking status on outcome after surgery. The
models are for illustration purposes only.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load in the simulated data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulated_rmsMD_data.html">simulated_rmsMD_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set the datadist which is required for rms modelling </span></span>
<span><span class="co"># (these two lines are standard)</span></span>
<span><span class="va">dd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rms/man/datadist.html" class="external-link">datadist</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>    </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>datadist<span class="op">=</span><span class="st">'dd'</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>Here is a simple example using a linear regression model (“ordinary
least squares”; OLS). We use simulated data for the impact of patient
factors on length of stay after an operation.</p>
<p>The output dataframe contains the estimated coefficients, their 95%
confidence intervals, and the associated p-values. These are in a
publication ready format.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fit a linear regression model using the rms package:</span></span>
<span><span class="va">fit_ols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rms/man/ols.html" class="external-link">ols</a></span><span class="op">(</span><span class="va">lengthstay</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> </span>
<span>                 <span class="va">bmi</span> <span class="op">+</span> </span>
<span>                 <span class="va">sex</span> <span class="op">+</span> </span>
<span>                 <span class="va">smoking</span>, </span>
<span>               data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a model summary and display it as a dataframe</span></span>
<span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_ols</span><span class="op">)</span></span>
<span><span class="co">#&gt;          variable               coef_95CI Pvalue</span></span>
<span><span class="co">#&gt; 1             age  0.306 (0.293 to 0.319) &lt;0.001</span></span>
<span><span class="co">#&gt; 2             bmi  0.095 (0.056 to 0.135) &lt;0.001</span></span>
<span><span class="co">#&gt; 3      sex=Female                     Ref      -</span></span>
<span><span class="co">#&gt; 4        sex=Male 0.271 (-0.040 to 0.582)  0.087</span></span>
<span><span class="co">#&gt; 5   smoking=Never                     Ref      -</span></span>
<span><span class="co">#&gt; 6  smoking=Former 0.131 (-0.248 to 0.510)  0.499</span></span>
<span><span class="co">#&gt; 7 smoking=Current  0.431 (0.050 to 0.812)  0.027</span></span>
<span></span>
<span><span class="co"># rmsMD dataframe as a table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_ols</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">coef_95CI</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">0.306 (0.293 to 0.319)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.095 (0.056 to 0.135)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">0.271 (-0.040 to 0.582)</td>
<td align="left">0.087</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.131 (-0.248 to 0.510)</td>
<td align="left">0.499</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">0.431 (0.050 to 0.812)</td>
<td align="left">0.027</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="customising-the-modelsummary_rms-output">Customising the modelsummary_rms output<a class="anchor" aria-label="anchor" href="#customising-the-modelsummary_rms-output"></a>
</h3>
<p>By default, the function uses the following stylistic settings:</p>
<ul>
<li>
<strong>combine_ci = TRUE:</strong> Combines the effect estimate and
the 95% confidence interval into a single column.</li>
<li>
<strong>round_dp_coef = 3:</strong> Rounds the effect estimates to
three decimal places.</li>
<li>
<strong>round_dp_p = 3:</strong> Rounds the p-values to three
decimal places.</li>
</ul>
<p>You can modify these defaults to adjust the appearance of the
output.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate a model summary with custom styling options &amp; store as summary_custom</span></span>
<span><span class="va">summary_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_ols</span>, </span>
<span>                                   combine_ci <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                                   round_dp_coef <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                                   round_dp_p <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># to display the dataframe as a table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">summary_custom</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">coef</th>
<th align="left">coef_lower95</th>
<th align="left">coef_upper95</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">0.31</td>
<td align="left">0.29</td>
<td align="left">0.32</td>
<td align="left">&lt;0.0001</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.10</td>
<td align="left">0.06</td>
<td align="left">0.13</td>
<td align="left">&lt;0.0001</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">0.27</td>
<td align="left">-0.04</td>
<td align="left">0.58</td>
<td align="left">0.0874</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.13</td>
<td align="left">-0.25</td>
<td align="left">0.51</td>
<td align="left">0.4990</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">0.43</td>
<td align="left">0.05</td>
<td align="left">0.81</td>
<td align="left">0.0267</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="exponentiating-coefficients-including-hazard-ratios-and-odds-ratios">Exponentiating Coefficients (including hazard ratios and odds
ratios)<a class="anchor" aria-label="anchor" href="#exponentiating-coefficients-including-hazard-ratios-and-odds-ratios"></a>
</h3>
<p>Exponentiating the coefficients of certain models makes the
interpretation more intuitive (e.g. as odds ratios in logistic
regression and hazard ratios in Cox models).</p>
<p>The <strong>modelsummary_rms</strong> package does this automatically
for the core <strong>rms</strong> models <code>ols</code>,
<code>lrm</code>, and <code>cph</code>. This ensures OR and HR are
displayed for logistic regression and Cox regression models
respectively. Below is an example using
<strong>modelsummary_rms</strong> on an <strong>rms</strong> logistic
regression model for postoperative complications. Note this
automatically provides OR:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># fitting the model</span></span>
<span><span class="va">fit_lrm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rms/man/lrm.html" class="external-link">lrm</a></span><span class="op">(</span><span class="va">majorcomplication</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> </span>
<span>                 <span class="va">bmi</span> <span class="op">+</span> </span>
<span>                 <span class="va">sex</span> <span class="op">+</span> </span>
<span>                 <span class="va">smoking</span>, </span>
<span>               data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># rmsMD summary</span></span>
<span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm</span><span class="op">)</span></span>
<span><span class="co">#&gt;          variable                OR_95CI Pvalue</span></span>
<span><span class="co">#&gt; 1             age 1.025 (1.018 to 1.031) &lt;0.001</span></span>
<span><span class="co">#&gt; 2             bmi 0.996 (0.978 to 1.016)  0.717</span></span>
<span><span class="co">#&gt; 3      sex=Female                    Ref      -</span></span>
<span><span class="co">#&gt; 4        sex=Male 1.080 (0.928 to 1.257)  0.319</span></span>
<span><span class="co">#&gt; 5   smoking=Never                    Ref      -</span></span>
<span><span class="co">#&gt; 6  smoking=Former 0.977 (0.799 to 1.196)  0.824</span></span>
<span><span class="co">#&gt; 7 smoking=Current 2.063 (1.719 to 2.476) &lt;0.001</span></span>
<span></span>
<span><span class="co"># displaying as a table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">1.025 (1.018 to 1.031)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.996 (0.978 to 1.016)</td>
<td align="left">0.717</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.080 (0.928 to 1.257)</td>
<td align="left">0.319</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.977 (0.799 to 1.196)</td>
<td align="left">0.824</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.063 (1.719 to 2.476)</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
<p>The <strong>modelsummary_rms</strong> from <strong>rmsMD</strong>
package is also capable of working with non-rms models, such as those
fitted using base R functions like lm(). However, in these cases the
package does not automatically determine the appropriate value for
exp_coef, so it must be set manually.</p>
<p>For example, when using a linear model (where exponentiation of
coefficients is not required), you should explicitly set exp_coef =
FALSE.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fit a simple linear model using lm() from base R </span></span>
<span><span class="co"># (an example model fit without using rms package)</span></span>
<span><span class="va">fit_lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">majorcomplication</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> </span>
<span>               <span class="va">bmi</span> <span class="op">+</span> </span>
<span>               <span class="va">sex</span> <span class="op">+</span> </span>
<span>               <span class="va">smoking</span>, </span>
<span>             data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a model summary for the non-RMS model </span></span>
<span><span class="co"># by explicitly setting exp_coef = FALSE</span></span>
<span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lm</span>, exp_coef <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;         variable                coef_95CI Pvalue</span></span>
<span><span class="co">#&gt; 1    (Intercept) -0.023 (-0.103 to 0.057)  0.569</span></span>
<span><span class="co">#&gt; 2            age   0.003 (0.002 to 0.004) &lt;0.001</span></span>
<span><span class="co">#&gt; 3            bmi -0.001 (-0.003 to 0.002)  0.688</span></span>
<span><span class="co">#&gt; 4        sexMale  0.011 (-0.010 to 0.031)  0.311</span></span>
<span><span class="co">#&gt; 5  smokingFormer -0.003 (-0.028 to 0.022)  0.822</span></span>
<span><span class="co">#&gt; 6 smokingCurrent   0.105 (0.080 to 0.130) &lt;0.001</span></span>
<span></span>
<span><span class="co"># display rmsMD results as a table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lm</span>, exp_coef <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">coef_95CI</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">-0.023 (-0.103 to 0.057)</td>
<td align="left">0.569</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="left">0.003 (0.002 to 0.004)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">bmi</td>
<td align="left">-0.001 (-0.003 to 0.002)</td>
<td align="left">0.688</td>
</tr>
<tr class="even">
<td align="left">sexMale</td>
<td align="left">0.011 (-0.010 to 0.031)</td>
<td align="left">0.311</td>
</tr>
<tr class="odd">
<td align="left">smokingFormer</td>
<td align="left">-0.003 (-0.028 to 0.022)</td>
<td align="left">0.822</td>
</tr>
<tr class="even">
<td align="left">smokingCurrent</td>
<td align="left">0.105 (0.080 to 0.130)</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="restricted-cubic-splines">Restricted Cubic Splines<a class="anchor" aria-label="anchor" href="#restricted-cubic-splines"></a>
</h2>
<p>Restricted Cubic Splines (RCS) are a flexible modelling tool used to
capture non-linear relationships between predictors and outcomes. In
medicine, for the majority of continuous variables (e.g. age, blood
pressure, or biomarker levels) the assumption of linearity may not hold.
A key highlight of the <strong>rms</strong> package is the ability to
analyse variables using RCS.</p>
<p>The <strong>rmsMD</strong> package is designed to report and
summarise models that include RCS terms. Individual coefficients for RCS
terms are difficult to interpret in isolation. Instead, an overall
p-value can be generated to assess whether the overall relationship
between the RCS variable and outcome is significant. By default
<code>modelsummary_rms</code> removes the individual RCS coefficients,
replacing them with the overall p-value for that variable. We recommend
that these are then plotted using the <code>ggrmsM</code> function,
shown below.</p>
<ul>
<li><p><strong>Display an overall p-value for the spline terms using the
<code>rcs_overallp</code> option.</strong><br>
When this option is set to <code>TRUE</code> (which is the default), the
function computes a single p-value that tests the overall significance
of the spline terms for each variable. This overall p-value provides
insight into whether the relationship between the predictor and the
dependent variable is significant.</p></li>
<li><p><strong>Hide the individual spline coefficients using the
<code>hide_rcs_coef</code> option.</strong><br>
Hiding the individual spline coefficients can be advantageous because
these lack straightforward clinical interpretation. Instead, the focus
is on the overall association captured by all RCS terms for that
specific variable. This helps simplify the output. If the variable has a
signficant association with outcome, we recommend plotting this
relationship.</p></li>
</ul>
<p>Here is an example model predicting occurence of complications after
surgery (binary), with the continuous variables age and BMI modelled
using restricted cubic splines with 4 knots:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fit an OLS model including a restricted cubic spline for Age (with 4 knots)</span></span>
<span><span class="va">fit_lrm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rms/man/lrm.html" class="external-link">lrm</a></span><span class="op">(</span></span>
<span>        <span class="va">majorcomplication</span> <span class="op">~</span> </span>
<span>                <span class="fu"><a href="https://rdrr.io/pkg/rms/man/rms.trans.html" class="external-link">rcs</a></span><span class="op">(</span><span class="va">age</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>   <span class="co"># Age modelled using RCS with 4 knots</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/pkg/rms/man/rms.trans.html" class="external-link">rcs</a></span><span class="op">(</span><span class="va">bmi</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>   <span class="co"># BMI also modelled with RCS with 4 knots</span></span>
<span>                <span class="va">sex</span> <span class="op">+</span>           <span class="co"># Binary variable for sex</span></span>
<span>                <span class="va">smoking</span>,        <span class="co"># Categorical variable for smoking status</span></span>
<span>        data <span class="op">=</span> <span class="va">data</span>                  </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate an rmsMD model summary using default settings</span></span>
<span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm</span><span class="op">)</span></span>
<span><span class="co">#&gt; RCS overall p-values displayed are from Wald tests.</span></span>
<span><span class="co">#&gt; To use the recommended test for this model type (LR test),</span></span>
<span><span class="co">#&gt; please set 'x = TRUE, y = TRUE' when fitting the model.</span></span>
<span><span class="co">#&gt;           variable                OR_95CI Pvalue</span></span>
<span><span class="co">#&gt; 1       sex=Female                    Ref      -</span></span>
<span><span class="co">#&gt; 2         sex=Male 1.078 (0.927 to 1.255)  0.330</span></span>
<span><span class="co">#&gt; 3    smoking=Never                    Ref      -</span></span>
<span><span class="co">#&gt; 4   smoking=Former 0.986 (0.806 to 1.207)  0.892</span></span>
<span><span class="co">#&gt; 5  smoking=Current 2.078 (1.731 to 2.496) &lt;0.001</span></span>
<span><span class="co">#&gt; 6 RCSoverallP: age              Wald test &lt;0.001</span></span>
<span><span class="co">#&gt; 7 RCSoverallP: bmi              Wald test  0.030</span></span>
<span></span>
<span><span class="co"># Outputting this as a table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; RCS overall p-values displayed are from Wald tests.</span></span>
<span><span class="co">#&gt; To use the recommended test for this model type (LR test),</span></span>
<span><span class="co">#&gt; please set 'x = TRUE, y = TRUE' when fitting the model.</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.078 (0.927 to 1.255)</td>
<td align="left">0.330</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.986 (0.806 to 1.207)</td>
<td align="left">0.892</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.078 (1.731 to 2.496)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age</td>
<td align="left">Wald test</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">RCSoverallP: bmi</td>
<td align="left">Wald test</td>
<td align="left">0.030</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="displaying-rcs-individual-coefficients-with-modelsummary_rms">Displaying RCS individual coefficients with modelsummary_rms<a class="anchor" aria-label="anchor" href="#displaying-rcs-individual-coefficients-with-modelsummary_rms"></a>
</h3>
<p>Displaying individual RCS coefficients is not the default behaviour.
If individual RCS coefficients are required, these can be added in by
setting <code>hide_rcs_coef</code> to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Generate a model summary with rcs_overallp set to TRUE </span></span>
<span><span class="co"># and hide_rcs_coef set to TRUE</span></span>
<span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm</span>, hide_rcs_coef <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; RCS overall p-values displayed are from Wald tests.</span></span>
<span><span class="co">#&gt; To use the recommended test for this model type (LR test),</span></span>
<span><span class="co">#&gt; please set 'x = TRUE, y = TRUE' when fitting the model.</span></span>
<span><span class="co">#&gt;            variable                OR_95CI Pvalue</span></span>
<span><span class="co">#&gt; 1               age 1.005 (0.980 to 1.030)  0.701</span></span>
<span><span class="co">#&gt; 2              age' 1.061 (0.992 to 1.134)  0.085</span></span>
<span><span class="co">#&gt; 3             age'' 0.799 (0.617 to 1.033)  0.087</span></span>
<span><span class="co">#&gt; 4               bmi 0.937 (0.881 to 0.996)  0.038</span></span>
<span><span class="co">#&gt; 5              bmi' 1.103 (0.923 to 1.320)  0.281</span></span>
<span><span class="co">#&gt; 6             bmi'' 0.855 (0.408 to 1.792)  0.677</span></span>
<span><span class="co">#&gt; 7        sex=Female                    Ref      -</span></span>
<span><span class="co">#&gt; 8          sex=Male 1.078 (0.927 to 1.255)  0.330</span></span>
<span><span class="co">#&gt; 9     smoking=Never                    Ref      -</span></span>
<span><span class="co">#&gt; 10   smoking=Former 0.986 (0.806 to 1.207)  0.892</span></span>
<span><span class="co">#&gt; 11  smoking=Current 2.078 (1.731 to 2.496) &lt;0.001</span></span>
<span><span class="co">#&gt; 12 RCSoverallP: age              Wald test &lt;0.001</span></span>
<span><span class="co">#&gt; 13 RCSoverallP: bmi              Wald test  0.030</span></span>
<span></span>
<span><span class="co"># Outputting this as a table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm</span>, hide_rcs_coef <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; RCS overall p-values displayed are from Wald tests.</span></span>
<span><span class="co">#&gt; To use the recommended test for this model type (LR test),</span></span>
<span><span class="co">#&gt; please set 'x = TRUE, y = TRUE' when fitting the model.</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">1.005 (0.980 to 1.030)</td>
<td align="left">0.701</td>
</tr>
<tr class="even">
<td align="left">age’</td>
<td align="left">1.061 (0.992 to 1.134)</td>
<td align="left">0.085</td>
</tr>
<tr class="odd">
<td align="left">age’’</td>
<td align="left">0.799 (0.617 to 1.033)</td>
<td align="left">0.087</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.937 (0.881 to 0.996)</td>
<td align="left">0.038</td>
</tr>
<tr class="odd">
<td align="left">bmi’</td>
<td align="left">1.103 (0.923 to 1.320)</td>
<td align="left">0.281</td>
</tr>
<tr class="even">
<td align="left">bmi’’</td>
<td align="left">0.855 (0.408 to 1.792)</td>
<td align="left">0.677</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.078 (0.927 to 1.255)</td>
<td align="left">0.330</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.986 (0.806 to 1.207)</td>
<td align="left">0.892</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.078 (1.731 to 2.496)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age</td>
<td align="left">Wald test</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">RCSoverallP: bmi</td>
<td align="left">Wald test</td>
<td align="left">0.030</td>
</tr>
</tbody>
</table>
<p>If overall p-values for the variables modelled with RCS are not
wanted, <code>rcs_overallp</code> can be set to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fit an OLS model including a restricted cubic spline for Age (with 4 knots)</span></span>
<span><span class="va">summary_spline_hide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm</span>, </span>
<span>                                        hide_rcs_coef <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                        rcs_overallp <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Outputting this as a table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">summary_spline_hide</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">1.005 (0.980 to 1.030)</td>
<td align="left">0.701</td>
</tr>
<tr class="even">
<td align="left">age’</td>
<td align="left">1.061 (0.992 to 1.134)</td>
<td align="left">0.085</td>
</tr>
<tr class="odd">
<td align="left">age’’</td>
<td align="left">0.799 (0.617 to 1.033)</td>
<td align="left">0.087</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.937 (0.881 to 0.996)</td>
<td align="left">0.038</td>
</tr>
<tr class="odd">
<td align="left">bmi’</td>
<td align="left">1.103 (0.923 to 1.320)</td>
<td align="left">0.281</td>
</tr>
<tr class="even">
<td align="left">bmi’’</td>
<td align="left">0.855 (0.408 to 1.792)</td>
<td align="left">0.677</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.078 (0.927 to 1.255)</td>
<td align="left">0.330</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.986 (0.806 to 1.207)</td>
<td align="left">0.892</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.078 (1.731 to 2.496)</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="interactions-with-rcs-variables">Interactions with RCS variables<a class="anchor" aria-label="anchor" href="#interactions-with-rcs-variables"></a>
</h3>
<p>The <strong>rms</strong> package allows interactions with variables
modelled using restricted cubic splines. In this setting, the individual
coefficients for RCS terms and their interactions are difficult to
interpret. <code>modelsummary_rms</code> handles this situation by
providing overall p-values for RCS variables (which give the overall
p-value taking into account all spline terms and all of their
interaction terms), and overall p-values for the interactions (takes
into account linear and non-linear terms), instead of the individual
coefficients. As above, this can be altered by changing
<code>rcs_overallp</code> and <code>hide_rcs_coef</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fit an OLS model with a restricted cubic spline for Age </span></span>
<span><span class="co"># and an interaction between Age and Exer.</span></span>
<span><span class="va">fit_lrm_interaction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rms/man/lrm.html" class="external-link">lrm</a></span><span class="op">(</span><span class="va">majorcomplication</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/rms/man/rms.trans.html" class="external-link">rcs</a></span><span class="op">(</span><span class="va">age</span>,<span class="fl">4</span><span class="op">)</span><span class="op">*</span><span class="va">smoking</span> <span class="op">+</span> </span>
<span>                             <span class="fu"><a href="https://rdrr.io/pkg/rms/man/rms.trans.html" class="external-link">rcs</a></span><span class="op">(</span><span class="va">bmi</span>,<span class="fl">4</span><span class="op">)</span> <span class="op">+</span> </span>
<span>                             <span class="va">sex</span> <span class="op">+</span> </span>
<span>                             <span class="va">smoking</span>, </span>
<span>                           data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a model summary with default RCS output</span></span>
<span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm_interaction</span><span class="op">)</span></span>
<span><span class="co">#&gt; RCS overall p-values displayed are from Wald tests.</span></span>
<span><span class="co">#&gt; To use the recommended test for this model type (LR test),</span></span>
<span><span class="co">#&gt; please set 'x = TRUE, y = TRUE' when fitting the model.</span></span>
<span><span class="co">#&gt;                                                    variable</span></span>
<span><span class="co">#&gt; 1                                             smoking=Never</span></span>
<span><span class="co">#&gt; 2                                            smoking=Former</span></span>
<span><span class="co">#&gt; 3                                           smoking=Current</span></span>
<span><span class="co">#&gt; 4                                                sex=Female</span></span>
<span><span class="co">#&gt; 5                                                  sex=Male</span></span>
<span><span class="co">#&gt; 6           RCSoverallP: age  (Factor+Higher Order Factors)</span></span>
<span><span class="co">#&gt; 7                                          RCSoverallP: bmi</span></span>
<span><span class="co">#&gt; 8 RCSoverallP: age * smoking  (Factor+Higher Order Factors)</span></span>
<span><span class="co">#&gt;                  OR_95CI Pvalue</span></span>
<span><span class="co">#&gt; 1                    Ref      -</span></span>
<span><span class="co">#&gt; 2 0.263 (0.023 to 3.061)  0.286</span></span>
<span><span class="co">#&gt; 3 0.490 (0.061 to 3.908)  0.501</span></span>
<span><span class="co">#&gt; 4                    Ref      -</span></span>
<span><span class="co">#&gt; 5 1.069 (0.919 to 1.245)  0.386</span></span>
<span><span class="co">#&gt; 6              Wald test &lt;0.001</span></span>
<span><span class="co">#&gt; 7              Wald test  0.033</span></span>
<span><span class="co">#&gt; 8              Wald test  0.064</span></span>
<span></span>
<span><span class="co"># Format the output as a nice table</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/modelsummary_rms.html">modelsummary_rms</a></span><span class="op">(</span><span class="va">fit_lrm_interaction</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; RCS overall p-values displayed are from Wald tests.</span></span>
<span><span class="co">#&gt; To use the recommended test for this model type (LR test),</span></span>
<span><span class="co">#&gt; please set 'x = TRUE, y = TRUE' when fitting the model.</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="65%">
<col width="26%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.263 (0.023 to 3.061)</td>
<td align="left">0.286</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">0.490 (0.061 to 3.908)</td>
<td align="left">0.501</td>
</tr>
<tr class="even">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="odd">
<td align="left">sex=Male</td>
<td align="left">1.069 (0.919 to 1.245)</td>
<td align="left">0.386</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age (Factor+Higher Order Factors)</td>
<td align="left">Wald test</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">RCSoverallP: bmi</td>
<td align="left">Wald test</td>
<td align="left">0.033</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age * smoking (Factor+Higher Order
Factors)</td>
<td align="left">Wald test</td>
<td align="left">0.064</td>
</tr>
</tbody>
</table>
<p>To get further information, for example for the overall effect of
smoking (the variable interacted with the spine for age here), use
<code>anova</code> as below:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">fit_lrm_interaction</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 Wald Statistics          Response: majorcomplication </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Factor                                       Chi-Square d.f. P     </span></span>
<span><span class="co">#&gt;  age  (Factor+Higher Order Factors)            71.86      9   &lt;.0001</span></span>
<span><span class="co">#&gt;   All Interactions                             11.91      6   0.0639</span></span>
<span><span class="co">#&gt;   Nonlinear (Factor+Higher Order Factors)      12.49      6   0.0520</span></span>
<span><span class="co">#&gt;  smoking  (Factor+Higher Order Factors)       100.96      8   &lt;.0001</span></span>
<span><span class="co">#&gt;   All Interactions                             11.91      6   0.0639</span></span>
<span><span class="co">#&gt;  bmi                                            8.71      3   0.0334</span></span>
<span><span class="co">#&gt;   Nonlinear                                     8.57      2   0.0138</span></span>
<span><span class="co">#&gt;  sex                                            0.75      1   0.3864</span></span>
<span><span class="co">#&gt;  age * smoking  (Factor+Higher Order Factors)  11.91      6   0.0639</span></span>
<span><span class="co">#&gt;   Nonlinear                                     9.49      4   0.0499</span></span>
<span><span class="co">#&gt;   Nonlinear Interaction : f(A,B) vs. AB         9.49      4   0.0499</span></span>
<span><span class="co">#&gt;  TOTAL NONLINEAR                               21.24      8   0.0065</span></span>
<span><span class="co">#&gt;  TOTAL NONLINEAR + INTERACTION                 23.95     10   0.0077</span></span>
<span><span class="co">#&gt;  TOTAL                                        166.34     15   &lt;.0001</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://scholar.google.com/citations?user=op7Z53gAAAAJ&amp;hl=en&amp;oi=ao" class="external-link">Samuel Tingle</a>, <a href="https://scholar.google.com/citations?user=X6Q-y3EAAAAJ&amp;hl=en&amp;oi=ao" class="external-link">Georgios Kourounis</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
